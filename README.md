# Kototoro 解析器

### 🌐 已支持网站及功能

以下是已内置的部分中文源及核心国际源的功能支持情况：

| 网站名称 | 分类 | 搜索 | 筛选 | 登录/下载 | 特色功能 |
| :--- | :---: | :---: | :---: | :---: | :--- |
| **哔哩轻小说 (Bilinovel)** | 小说 | ❌ | ✅ | ❌/✅ | 部分资源需要登录，注册看天 |
| **笔趣阁 (Biquge)** | 小说 | ✅ | ✅ | ❌/✅ | 似乎是那个笔趣阁 |
| **轻小说文库 (Wenku8)** | 小说 | ❌ | ✅ | ✅/✅ | 08年看到现在，需要登录获取列表，但是继续阅读不需要 |
| **神凑轻小说 (Shencou)** | 小说 | ❌ | ✅ | ❌/✅ | 不需要登录的wenku8 |
| **轻之国度 (LKNovel)** | 小说 | ❌ | ✅ | ❌/✅ | 老牌轻小说论坛，大部分轻小说翻译的源头 |
| **轻小说百科 (LightNovelWiki)** | 小说 | ❌ | ✅ | ❌/✅ | 简单，但是资源丰富 |
| **Bato.To** | 漫画 | ✅ | ✅ | ✅/✅ | 全球化多语言源 |
| **绅士漫画 (Wnacg)** | 漫画 | ✅ | ✅ | ✅/✅ | 经典同人本子站 |
| **禁漫天堂 (JmComic)** | 漫画 | ✅ | ✅ | ❌/✅ | 自动选择镜像站点，登录有问题 |
| **哔咔漫画 (Picacg)** | 漫画 | ✅ | ✅ | ✅/✅ | 稳定分流、老牌本子站，需要登录才能浏览 |
| **拷贝漫画 (CopyManga)** | 漫画 | ✅ | ✅ | ✅/✅ | 可能是最知名的漫画网站之一，也是防爬虫最严厉的 |
| **包子漫画 (Baozimh)** | 漫画 | ✅ | ✅ | ✅/✅ | 网速快，部分漫画不更新 |
| **漫画柜** | 漫画 | ✅ | ✅ | ✅/✅ | 传统老牌漫画站 |
| **再漫画 (Zaimanhua)** | 漫画 | ✅ | ✅ | ✅/✅ | 最知名的漫画网站，大妈之家的继任者，部分漫画需要登录浏览 |
| **优酷漫画 (YKMH)** | 漫画 | ✅ | ✅ | ❌/✅ | 辅助补充源 |
| **CCC 追漫台** | 漫画 | ✅ | ✅ | ❌/✅ | 台湾正版漫画采集 |
| **Komiic** | 漫画 | ✅ | ✅ | ✅/✅ | 台湾漫画社区 |
| **AGE 动漫 (Age)** | 视频 | ✅ | ✅ | ❌/❌ | 动漫资源极其丰富，默认的分流需要vip，请自行切换 |
| **动漫巴士 (DMBUS)** | 视频 | ✅ | ✅ | ❌/❌ | 老牌动画源 |
| **二矿动漫 (Erkuang)** | 视频 | ✅ | ✅ | ❌/❌ | 高清动漫 |
| **Hanime1** | 视频 | ✅ | ✅ | ❌/❌ | 里番 |


> [!TIP]
> 更多小众源（如：百合会、漫小肆、94MT等）请在应用内“源管理”中直接搜索添加。


## 🛠️ 开发解析器（源）引导

本项目采用高度解耦的解析器框架，支持快速添加漫画、小说或视频源。

### 1. 环境准备
```bash
# 克隆应用主仓库与解析器仓库到同一父目录下
git clone https://github.com/skepsun/Kototoro.git
git clone https://github.com/skepsun/kototoro-parsers.git

# 开启本地调试模式：在 Kototoro/settings.gradle 末尾取消注释 includeBuild 部分
# 这将使应用直接使用本地的 kototoro-parsers 源码进行编译，方便实时调试
```

### 2. 开发流程
1. **创建解析器**：在 `kototoro-parsers/src/main/kotlin/org/skepsun/kototoro/parsers/site/zh` 目录下新建 Kotlin 类。
   - **漫画源**：参考 `Baozimh.kt` (HTML 解析) 或 `KomiicParser.kt` (API 解析)。
   - **小说源**：参考 `Bilinovel.kt` (带图片/复杂逻辑) 或 `Shencou.kt` (简洁 HTML)。
   - **视频源**：参考 `Hanime1.kt`。
2. **注册源**：使用 `@MangaSourceParser` 注解定义唯一 ID、名称及内容类型。
3. **实现核心方法**：
   - `getListPage()`: 首页/分类/搜索列表加载。
   - `getDetails()`: 详情页数据加载及章节列表获取。
   - `getPages()`: 获取具体章节的内容链接（图片或 HTML）。
4. **测试与调试**：
   - 使用 `./gradlew installDebug` 安装到设备。
   - 打开 adb logcat，过滤 `NovelReaderActivity` 或相关解析器 Tag 查看日志。
   - **Tip**: 推荐使用本项目集成的 AI 辅助功能进行代码分析与修复。

### 3. 常见技巧
- **规避反爬**：在解析器中实现 `Interceptor` 接口以自定义 Header、Referer 或处理 Cloudflare 验证。
- **图片代理**：如果站点开启了防盗链，可在 `getPages` 或拦截器中注入正确的 Referer。
- **数据格式**：小说解析器需通过 `NovelChapterContent` 返回 HTML 内容。